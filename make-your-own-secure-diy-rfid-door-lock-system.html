<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>How to Make an RFID Door Lock With a PN532 and D1 Mini | ZestW</title><meta name=generator content="Hugo 0.98.0"><meta name=description content="RFID-based door access control is not new. There are several RFID-based systems available in the market that you can install for secure access. However, you can unlock most of the RFID door lock systems using a paper clip since the trigger switch is located within the module installed outside the door.
  So let's instead build a completely secure DIY RFID-based door access control system using an ESP8266 and a PN532 RFID/NFC module that can be integrated with your existing electronic lock."><link rel=stylesheet href=https://assets.cdnweb.info/hugo/cayman/css/normalize.css><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel=stylesheet type=text/css><link rel=stylesheet href=https://assets.cdnweb.info/hugo/cayman/css/cayman.css><link rel=apple-touch-icon sizes=180x180 href=./apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=./favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=./favicon-16x16.png><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css integrity=sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js integrity=sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body)></script></head><body><section class=page-header><h1 class=project-name>ZestW</h1><h2 class=project-tagline></h2><nav><a href=./index.html class=btn>Blog</a>
<a href=./sitemap.xml class=btn>Sitemap</a>
<a href=./index.xml class=btn>RSS</a></nav></section><section class=main-content><h1>How to Make an RFID Door Lock With a PN532 and D1 Mini</h1><div><strong>Publish date: </strong>2024-07-20</div><p>RFID-based door access control is not new. There are several RFID-based systems available in the market that you can install for secure access. However, you can unlock most of the RFID door lock systems using a paper clip since the trigger switch is located within the module installed outside the door.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>So let's instead build a completely secure DIY RFID-based door access control system using an ESP8266 and a PN532 RFID/NFC module that can be integrated with your existing electronic lock. Once installed, you can unlock your door using a registered RFID card/tag or smartphone.</p><h2 id=things-you-rsquo-ll-need>Things You’ll Need</h2><p>To build a DIY RFID-based secure door access control system, you will need the following:</p><ul><li>One WeMos D1 Mini. You may also use a NodeMCU.</li><li>A single-channel relay module.</li><li>Micro USB cable.</li><li>DuPont or female to female Jumper Wires.</li><li>Female berg strip.</li><li>PN532 RFID/NFC Module. You may also use the MFRC522. Wiegand or RDM6300 RFID sensor. We are using PN532 as it has a smaller footprint and offers a good scan range.</li><li>Soldering iron and tin.</li></ul><h2 id=flash-the-firmware-to-d1-mini>Flash the Firmware to D1 Mini</h2><p>We will use the <a href=# rel="noopener noreferrer">ESP-RFID project</a> on GitHub to build our DIY RFID door access control system. Follow these steps to download and flash the ESP-RFID firmware on your D1 Mini or NodeMCU.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><li>Download the <a href=# rel="noopener noreferrer">esp-rfid-1.0.2.zip</a> file and extract the folder on your Desktop. It contains a few program files, including a <strong>generic.bin</strong> firmware file. Optionally, you may also download the latest <strong>v1.3.3</strong> unstable build.</li><li>Download and run the <a href=# rel="noopener noreferrer">ESPHomeFlasher</a> tool.</li><li>Using a Micro USB cable, connect the D1 Mini or NodeMCU to your PC.</li><li>In the ESPHome Flasher tool, click the refresh icon and choose the COM port where your D1 Mini is connected.</li><li>Click the <strong>Browse</strong> button and choose the <strong>generic.bin</strong> file that we extracted in step 1.<img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.makeuseofimages.com/wordpress/wp-content/uploads/2022/10/extract-the-esp-rfid-firmware-on-desktop.jpg></li><li>Click <strong>Flash ESP</strong>.<img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.makeuseofimages.com/wordpress/wp-content/uploads/2022/10/flash-esp-rfid-firmware-using-esphome-flasher-tool.jpg></li><li>This will take a few seconds to complete. Configure the RFID Settings</li><h2 id=configure-the-rfid-settings>Configure the RFID Settings</h2><p>Once the firmware is flashed, reconnect the USB cable to D1 Mini and follow these steps to configure the RFID settings:</p><li>On your smartphone’s Wi-Fi settings, find and connect to the <strong>ESP-RFID-xxxxx</strong> access point. It’s an open access point, so it does not require a password to connect.</li><li>Once connected, switch off the mobile data on your Android and iOS smartphone, and then open the web browser.</li><li>Visit the IP address <strong>192.168.4.1</strong>, and enter the password <strong>admin</strong> to log in.</li><li>Click <strong>Menu</strong> > <strong>Hardware</strong><strong>Settings</strong> and choose the following options from the respective drop-downs:<li>Select <strong>PN532 </strong>from the <strong>Reader Type</strong>.</li><li>Choose <strong>GPIO-2</strong> from <strong>SPI SS</strong>.</li><li>Keep Everything default and click <strong>Save</strong></li></li><li>Go to<strong> Menu > Settings > General Settings</strong></li><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><li>Change the <strong>Admin Password </strong>from the default <strong>admin</strong> to something complex. This is a critical step and you must use a long and complex password to protect the devices from unauthorized access.</li><li>You may also edit the <strong>Host Name </strong>and choose if you want the device to<strong> Auto Restart </strong>Every 24h, 7 days, or 30 days.</li><li>Go to <strong>Menu</strong> > <strong>Wireless</strong><strong>Network</strong> and then enter a complex password to secure the access point. Again, use a strong password to prevent unauthorized access.<img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.makeuseofimages.com/wordpress/wp-content/uploads/2022/10/esprfid-wi-fi-settings-1.jpg></li><li>You may also choose the <strong>Client</strong> option and connect the device to a wireless network.</li><li>Click <strong>Save</strong> and then click on the <strong>text highlighted with yellow</strong> color at the bottom of the screen.</li><li>Click <strong>Save & Reboot</strong>.<img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.makeuseofimages.com/wordpress/wp-content/uploads/2022/10/edit-and-configure-esp-rfid-settings-and-save-changes-2.jpg></li><li>The device will reboot.</li><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><h2 id=connect-rfid-sensor-to-d1-mini>Connect RFID Sensor to D1 Mini</h2><p>Disconnect the USB cable from D1 Mini or NodeMCU. Refer to the following table and diagram to connect the PN532 RFID/NFC sensor and the relay module to the D1 Mini or NodeMCU board.</p><table border=1 cellpadding=1 cellspacing=0 style=border-collapse:collapse align summary><tbody><tr><td style=border-bottom:1pxsolidblack;border-left:1pxsolidblack;border-right:1pxsolidblack;border-top:1pxsolidblack;vertical-align:top;width:276px><p><strong>NodeMcu/WeMos D1 Mini Pins</strong></p></td><td style=border-bottom:1pxsolidblack;border-left:none;border-right:1pxsolidblack;border-top:1pxsolidblack;vertical-align:top;width:166px><p><strong>PN532 Pins</strong></p></td><td style=border-bottom:1pxsolidblack;border-left:none;border-right:1pxsolidblack;border-top:1pxsolidblack;vertical-align:top;width:160px><p><strong>Relay Module</strong></p></td></tr><tr><td style=border-bottom:1pxsolidblack;border-left:1pxsolidblack;border-right:1pxsolidblack;border-top:none;vertical-align:top;width:276px><p>D8 (GPIO-15)</p></td><td style=border-bottom:1pxsolidblack;border-left:none;border-right:1pxsolidblack;border-top:none;vertical-align:top;width:166px><p>SS</p></td><td style=border-bottom:1pxsolidblack;border-left:none;border-right:1pxsolidblack;border-top:none;vertical-align:top;width:160px></td></tr><tr><td style=border-bottom:1pxsolidblack;border-left:1pxsolidblack;border-right:1pxsolidblack;border-top:none;vertical-align:top;width:276px><p>D7 (GPIO-13)</p></td><td style=border-bottom:1pxsolidblack;border-left:none;border-right:1pxsolidblack;border-top:none;vertical-align:top;width:166px><p>MOSI</p></td><td style=border-bottom:1pxsolidblack;border-left:none;border-right:1pxsolidblack;border-top:none;vertical-align:top;width:160px></td></tr><tr><td style=border-bottom:1pxsolidblack;border-left:1pxsolidblack;border-right:1pxsolidblack;border-top:none;vertical-align:top;width:276px><p>D6 (GPIO-12)</p></td><td style=border-bottom:1pxsolidblack;border-left:none;border-right:1pxsolidblack;border-top:none;vertical-align:top;width:166px><p>MISO</p></td><td style=border-bottom:1pxsolidblack;border-left:none;border-right:1pxsolidblack;border-top:none;vertical-align:top;width:160px></td></tr><tr><td style=border-bottom:1pxsolidblack;border-left:1pxsolidblack;border-right:1pxsolidblack;border-top:none;vertical-align:top;width:276px><p>D5 (GPIO-14)</p></td><td style=border-bottom:1pxsolidblack;border-left:none;border-right:1pxsolidblack;border-top:none;vertical-align:top;width:166px><p>SCK</p></td><td style=border-bottom:1pxsolidblack;border-left:none;border-right:1pxsolidblack;border-top:none;vertical-align:top;width:160px></td></tr><tr><td style=border-bottom:1pxsolidblack;border-left:1pxsolidblack;border-right:1pxsolidblack;border-top:none;vertical-align:top;width:276px><p>D4 (GPIO-2)</p></td><td style=border-bottom:1pxsolidblack;border-left:none;border-right:1pxsolidblack;border-top:none;vertical-align:top;width:166px></td><td style=border-bottom:1pxsolidblack;border-left:none;border-right:1pxsolidblack;border-top:none;vertical-align:top;width:160px><p>INPUT</p></td></tr><tr><td style=border-bottom:1pxsolidblack;border-left:1pxsolidblack;border-right:1pxsolidblack;border-top:none;vertical-align:top;width:276px><p>Vin/5V</p></td><td style=border-bottom:1pxsolidblack;border-left:none;border-right:1pxsolidblack;border-top:none;vertical-align:top;width:166px><p>VCC</p></td><td style=border-bottom:1pxsolidblack;border-left:none;border-right:1pxsolidblack;border-top:none;vertical-align:top;width:160px><p>VCC</p></td></tr><tr><td style=border-bottom:1pxsolidblack;border-left:1pxsolidblack;border-right:1pxsolidblack;border-top:none;vertical-align:top;width:276px><p>G</p></td><td style=border-bottom:1pxsolidblack;border-left:none;border-right:1pxsolidblack;border-top:none;vertical-align:top;width:166px><p>GND</p></td><td style=border-bottom:1pxsolidblack;border-left:none;border-right:1pxsolidblack;border-top:none;vertical-align:top;width:160px><p>Ground</p></td></tr></tbody></table><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Use the DuPont wires or Berg Strips to connect or solder the D1 Mini or NodeMCU pins to the PN532 and the relay module. If you never soldered any connection before, <a href=#>learn how to solder wires and electronics</a>.</p><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.makeuseofimages.com/wordpress/wp-content/uploads/2022/10/connect-pn532-and-relay-module-to-d1-mini-or-nodemcu.jpg><p>Make sure to enable SPI protocol on PN532 by moving the DIP switch to 0 and 1 positions as shown below.</p><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.makeuseofimages.com/wordpress/wp-content/uploads/2022/10/enable-spi-mode-pn532-by-moving-dip-switch.jpg><p>Once the RFID module is connected to your NodeMCU or WeMos D1 Mini, you can start scanning the RFID card to register and add users to allow/disallow access.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><h2 id=add-rfid-cards-users>Add RFID Cards/Users</h2><p>After connecting the PN532 module to the D1 Mini or NodeMCU, follow these steps to add and register users’ RFID cards or tags.</p><li>Connect the USB power supply to the Wemos D1 Mini or NodeMUC.</li><li>Go to your <strong>Wi-Fi settings</strong> and connect to the <strong>esp-rfid </strong>access point<strong> </strong>using the password you set up under <strong>Wireless Network</strong> settings.</li><li>Visit the <strong>192.168.4.1</strong> IP address.</li><li>Click <strong>Menu</strong> > <strong>Users</strong>.</li><li>Take an RFID card or tag and put it against or near the PN532 RFID/NFC sensor. You will see a new <strong>Add a new User</strong> form with the scanned RFID tag ID.</li><li>Type the name of the person to whom the card or tag belongs.</li><li>Choose <strong>Access Type</strong>. You can choose between <strong>Always, Disabled,</strong> or<strong> Administrator</strong>. You should add one card for the admin (yourself).<img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.makeuseofimages.com/wordpress/wp-content/uploads/2022/10/add-new-users-to-the-esp-rfid-1.jpg></li><li>Choose <strong>Valid until </strong>date till when you want to allow or disable the user access.</li><li>Click <strong>Save Changes </strong>to save the user details.</li><h2 id=unlock-door-using-web-interface>Unlock Door Using Web Interface</h2><p>Once you have added and saved the users’ RFID cards, you can scan them against the PN532 sensor. Scanning cards with <strong>Access Type</strong>: <strong>Always </strong>or <strong>Administrator</strong> will trigger the connected relay module. You can connect the wires of your electronic door lock power supply switch to this relay module to trigger the lock and unlock the door.</p><p>Here’s a connection diagram you can refer to for connecting the electronic door lock trigger switch wires.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong> <img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.makeuseofimages.com/wordpress/wp-content/uploads/2022/10/interface-esp-rfid-relay-with-your-existing-door-lock-switch.jpg><h2 id=secure-rfid-door-access-control>Secure RFID Door Access Control</h2><p>Unlike RFID door access control systems available in the market that can be easily unlocked and have no UI, this DIY RFID door lock system is Wi-Fi enabled, smart, and offers an intuitive UI to manage users and revoke their access anytime.</p><p>If you connect the DIY RFID module to your Wi-Fi network, you can access it on your network through IP address assigned by your router. You can assign static IP to this device and unlock the door by login into the web interface and clicking on the <strong>Test</strong> button under the <strong>Hardware Settings</strong>. You can use a LAN cable or any cable with 6-wires to separate the PN532 and the D1 Mini or NodeMCU relay module to prevent unauthorized access and secure your door lock.</p><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmivp6x7rq3KnqysnZ%2Bbe6S7zGikmqOVYsawwdFmprCmXaiypMHRnmSdoaliv6e1w2abqKeiYrmwr8pmqrKrpJq6cA%3D%3D</p><footer class=site-footer><span class=site-footer-credits>Made with <a href=https://gohugo.io/>Hugo</a>. © 2022. All rights reserved.</span></footer></section><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>