<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>How to Use the scp Command on Linux | ZestW</title><meta name=generator content="Hugo 0.98.0"><meta name=description content="Quick LinksWhat is scp and the Secure Copy Protocol?   Copying a Single File with scp  Retrieving a Single File  Copying Multiple Files  Recursively Copying Directories Over scp  Copying Files Between Remote Servers  Other SCP Options   Key Takeaways   SCP is a secure and simple way to copy files between Linux computers using SSH. It is easy to use and can be a safe means of transferring files."><link rel=stylesheet href=https://assets.cdnweb.info/hugo/cayman/css/normalize.css><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel=stylesheet type=text/css><link rel=stylesheet href=https://assets.cdnweb.info/hugo/cayman/css/cayman.css><link rel=apple-touch-icon sizes=180x180 href=./apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=./favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=./favicon-16x16.png><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css integrity=sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js integrity=sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body)></script></head><body><section class=page-header><h1 class=project-name>ZestW</h1><h2 class=project-tagline></h2><nav><a href=./index.html class=btn>Blog</a>
<a href=./sitemap.xml class=btn>Sitemap</a>
<a href=./index.xml class=btn>RSS</a></nav></section><section class=main-content><h1>How to Use the scp Command on Linux</h1><div><strong>Publish date: </strong>2024-09-23</div><h3>Quick Links</h3><ul class=table-content-level-1><li><a href=#>What is scp and the Secure Copy Protocol?</a></li></ul><ul class=table-content-level-1><li><a href=#>Copying a Single File with scp</a></li></ul><ul class=table-content-level-1><li><a href=#>Retrieving a Single File</a></li></ul><ul class=table-content-level-1><li><a href=#>Copying Multiple Files</a></li></ul><ul class=table-content-level-1><li><a href=#>Recursively Copying Directories Over scp</a></li></ul><ul class=table-content-level-1><li><a href=#>Copying Files Between Remote Servers</a></li></ul><ul class=table-content-level-1><li><a href=#>Other SCP Options</a></li></ul><h3 class="title icon i-list">Key Takeaways</h3><ul><li>SCP is a secure and simple way to copy files between Linux computers using SSH. It is easy to use and can be a safe means of transferring files.</li><li>SCP has been considered deprecated since OpenSSH version 8.8, and modern implementations default to using SFTP for file transfers. However, the syntax remains the same.</li><li>While rsync is preferred over scp, scp is still a suitable option for copying files between computers on a self-contained network. SSH must be running on all computers involved in the transfer.</li></ul><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>The <code>scp</code> command makes <a href=#>copying files</a> between Linux computers easy and secure. It uses <a href=#>SSH security</a>, but best of all, it is simple. If you can use <code>cp</code>, you can use <code>scp</code>.</p><h2></h2><h2 id=what-is-scp-and-the-secure-copy-protocol>What is scp and the Secure Copy Protocol?</h2><p>Let's define a couple of terms: there's SCP and there's <code>scp</code>. The uppercase SCP stands for the <a href=#>Secure Copy Protocol</a>. The lowercase <code>scp</code> stands for secure <code>cp</code>. In other words, SCP is a protocol and <code>scp</code> is a program.</p><p><code>scp</code> was designed to be a safe and secure means of copying files between <a href=#>remote Linux computers</a>. It uses SSH to establish secure connections. SSH, or secure shell, is a <a href=#>cryptographic</a> network protocol often used to access and log in to remote Linux computers. On <a href=#>Linux distributions</a>, SSH functionality is provided by OpenSSH.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>SCP is somewhat long in the tooth, and concerns have been aired concerning its use in the present day. Since OpenSSH version 8.8, SCP has been considered deprecated. Modern implementations of <code>scp</code> default to using the Secure File Transfer Protocol by default. SSH is still used for the secure connection, but the file transfers are handled by <a href=#>SFTP</a>. This is all invisible and happens magically under the hood, and the <code>scp</code> syntax has remained the same.</p><p><a href=#>The</a><a href=#><code>rsync</code></a><a href=#>program</a> is preferred over <code>scp</code> , but you may encounter a computer that doesn't have rsync installed, and for which you don't have <a href=#>root</a> privileges meaning you can't go ahead and install it. For copying files from computer to computer on a self-contained network, <code>scp</code> is perfectly fine. For <code>scp</code> to work, you must have SSH running on all of the computers you'll be copying to and from.</p><p>To see the version of OpenSSH installed on your computer, type:</p><pre>ssh -V</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/0.png> <strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><h2 id=copying-a-single-file-with-scp>Copying a Single File with scp</h2><p>Like the standard <code>cp</code> command, <code>scp</code> copies files from the source location to the target location. To copy a file to a remote computer, you must know the IP address or network name of the remote computer. You must also have the credentials for a user account that has write privileges for the location you're sending the file to.</p><p>To send a file called "sample.txt" to a computer called "fedora-34" on the local network, the syntax is:</p><pre>scp ./sample.txt dave@fedora-34.local:/home/dave/Downloads/</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/0.png><p>The command is made up of:</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><ul><li><strong>scp</strong>: The scp command</li><li><strong>./sample.txt</strong>: The file we're going to send. This is in the current directory.</li><li><strong>dave@</strong>: The user account on the remote computer we're going to send the file to.</li><li><strong>fedora-34.local</strong>: The network name of the remote computer.</li><li><strong>:/home/dave/Downloads/</strong>: The location to copy the file to on the remote computer. Note the colon ":" that separates the computer name and the path.</li></ul><p>You'll be prompted to enter the password for the account on the remote computer, and then the file is copied.</p><p>If you want the file to have a different name on the remote computer, you can add a filename to the target path. To copy the same file and have it named "different-file.txt", use this syntax:</p><pre>scp ./sample.txt dave@fedora-34.local:/home/dave/Downloads/different-file.txt</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/0.png> <strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>The <code>scp</code> command will silently overwrite existing files, so be careful when you're copying files. If a file already exists on the target computer with the same name as the file you're copying, it will be overwritten and lost.</p><p>If the target computer isn't using the default SSH port of 22, you can use the <code>-P</code> (port number) option to provide the appropriate port number.</p><h2 id=retrieving-a-single-file>Retrieving a Single File</h2><p>To copy a file from a remote server, simply put the remote server as the source, and put the local path where you want the file copied as the target. We're going to copy a file called "development-plan.md" from the remote computer to the current directory on the local computer.</p><pre>scp dave@fedora-34.local:/home/dave/Downloads/development-plan.md .</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/0.png> <strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>If you add a filename to the local path, the file is copied and given that name.</p><pre>scp dave@fedora-34.local:/home/dave/Downloads/development-plan.md ./dp-1.md</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/0.png><p>The file is copied but renamed to our specified filename.</p><pre>ls -hl *.md</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/0.png><h2 id=copying-multiple-files>Copying Multiple Files</h2><p>Copying multiple files in either direction is easy. You can list as many source files as you like. Here, we're copying two <a href=#>markdown</a> files and a <a href=#>CSV file</a>.</p><pre>scp ./dp-1.md ./dp-2.md ./dp-3.csv dave@fedora-34.local:/home/dave/Downloads/</pre><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong> <img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/0.png><p>The three files are copied to the remote computer. You can also use wildcards. This command does exactly the same thing as the last command.</p><pre>scp ./dp. dave@fedora-34.local:/home/dave/Downloads/</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/0.png><h2 id=recursively-copying-directories-over-scp>Recursively Copying Directories Over scp</h2><p>The <code>-r</code> (recursive) option lets you <a href=#>copy entire directory trees</a> with a single command. We've placed two files in a directory called "data" and created a directory called "CSV" inside the "data" directory. We placed a CSV file in the "data/CSV" directory.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>This command copies the files and recreates the directory structure on the remote computer.</p><pre>scp -r ./data dave@fedora-34.local:/home/dave/Downloads/</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/0.png><h2 id=copying-files-between-remote-servers>Copying Files Between Remote Servers</h2><p>You can even instruct <code>scp</code> to copy files from one remote server to another. The syntax is pretty simple. You provide the account name and network address of the source server and the account name and network address of the target server. The files are copied from the source server and copied to the location on the target server.</p><p>Although the syntax is simple, ensuring everything else is in place takes a bit more thought. Obviously, the location you're trying to copy the files to on the remote server must be accessible by the user account you specify on the command line. And that user account must have write permissions on that location.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>A more subtle prerequisite is that SSH access must be set up between your local computer and the source computer, and also between the source and target servers. Ensure that you can use SSH to log in to the target server from the source server. If you can't do that, <code>scp</code> won't be able to connect.</p><p><a href=#>Setting up SSH keys</a> so that you can use authenticated but passwordless access is by far the preferred method. Using passwords becomes messy very quickly, and---because you're prompted for the password for each user account---it prevents you from fully automating the process with a script.</p><p>We set up SSH keys for the user accounts we're using on each remote server. This provided seamless SSH access to the other server, for those two users. This allows us to transfer files in either direction, using those two user accounts.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>To copy files from the "davem" user account on a <a href=#>Manjaro</a> computer to the "dave" account on a Fedora computer, via an <code>scp</code> command issued from our local Ubuntu computer, the syntax is:</p><pre>scp davem@manjaro20-0-1.local:/home/davem/man. dave@fedora-34.local:/home/dave/</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/0.png><p>We're silently returned to the command line. There's no indication anything happened. Working on the premise that no news is good news, <code>scp</code> only reports on errors for this remote to remote copying. On checking the Fedora computer we can see that the files from the Manjaro computer have been copied and received.</p><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/0.png> <strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>By default, the files are copied directly from the source computer to the target computer. You can override this using the <code>-3</code> (three-way) option.</p><p>With this option, the files are transferred from the target to the source, through your local computer. For that to happen, there needs to be seamless SSH access from your local computer to the target computer.</p><pre>scp -3 davem@manjaro20-0-1.local:/home/davem/man. dave@fedora-34.local:/home/dave/</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/0.png><p>There's still no indication anything has happened, even when channeling the files through your local computer. The proof of the pudding, of course, is to check the target computer.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><h2 id=other-scp-options>Other SCP Options</h2><p>The <code>-p</code> (preserve file attributes) will keep the original file creation, ownership, and access flags on the transferred files. They'll have the same metadata as the original files on the source computer.</p><p>If you see error messages, try repeating the command and use the <code>-v</code> (verbose) flag to see detailed information about the transfer attempt. You ought to be able to spot the point of failure in the output.</p><p>The <code>-C</code> (compress) option <a href=#>compresses the files</a> as they are copied and decompresses them when they're received. This is something that dates back to the era of slow modem communications between computers. Reducing the size of the payload could reduce transmission times.</p><p>Nowadays, the time taken to compress and decompress the files is likely to take longer than the difference between the compressed and uncompressed transmissions. But because <code>scp</code> is best used to copy files between computers on the same <a href=#>LAN</a>, transmission speed shouldn't be much of a concern.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmivp6x7qbvWraagnZWge6S7zGhvaWxhbIZwv8KpZJynnaKur7CMpaCnrahk</p><footer class=site-footer><span class=site-footer-credits>Made with <a href=https://gohugo.io/>Hugo</a>. © 2022. All rights reserved.</span></footer></section><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>